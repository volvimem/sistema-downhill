<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro Oficial - Downhill PE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#003399">
    <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}</script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { 
            background: linear-gradient(rgba(0, 51, 153, 0.8), rgba(0, 51, 153, 0.8)), 
                        url('https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Bandeira_de_Pernambuco.svg/1200px-Bandeira_de_Pernambuco.svg.png'); 
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px;
        }
        .box { background: white; padding: 35px; border-radius: 20px; width: 100%; max-width: 650px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border-top: 8px solid #ffcc00; }
        h2 { color: #003399; text-align: center; margin-bottom: 30px; font-weight: 800; text-transform: uppercase; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        @media (max-width: 550px) { .form-grid { grid-template-columns: 1fr; } }
        .full-width { grid-column: span 2; }
        label { display: block; font-size: 11px; font-weight: 700; margin-bottom: 5px; color: #003399; text-transform: uppercase; }
        .wrapper { position: relative; display: flex; align-items: center; }
        .wrapper i.icon-left { position: absolute; left: 15px; color: #003399; }
        input, select { width: 100%; padding: 12px 12px 12px 45px; border: 2px solid #eee; border-radius: 10px; outline: none; background: #fafafa; font-size: 14px; transition: 0.3s; }
        input:focus, select:focus { border-color: #003399; background: white; }
        button { grid-column: span 2; padding: 18px; background: #e63946; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 15px; font-size: 16px; text-transform: uppercase; transition: 0.3s; }
        button:hover { background: #003399; transform: scale(1.02); }
    </style>
</head>
<body>
    <div class="box">
        <h2>CADASTRO DE PILOTO</h2>
        <form id="cadastroForm" class="form-grid">
            <div class="group full-width"><label>Nome Completo</label><div class="wrapper"><i class="fas fa-user icon-left"></i><input type="text" id="nome" required></div></div>
            <div class="group full-width"><label>Sua Foto (Selfie)</label><div class="wrapper"><i class="fas fa-camera icon-left"></i><input type="file" id="selfie" accept="image/*" style="padding: 8px;"></div></div>
            <div class="group"><label>Nascimento</label><div class="wrapper"><i class="fas fa-calendar icon-left"></i><input type="date" id="nascimento" required></div></div>
            <div class="group"><label>CPF</label><div class="wrapper"><i class="fas fa-id-card icon-left"></i><input type="text" id="cpf" maxlength="14" required placeholder="000.000.000-00"></div></div>
            <div class="group full-width"><label>Categoria Oficial</label><div class="wrapper"><i class="fas fa-bicycle icon-left"></i>
                <select id="categoria" required>
                    <option value="">Selecione sua categoria...</option>
                    <optgroup label="PRO"><option value="ELITE">ELITE (Livre)</option><option value="RIGIDA PRO">RÍGIDA PRO (Livre)</option><option value="SUB-30">SUB-30 (19 a 29 anos)</option></optgroup>
                    <optgroup label="MASTER"><option value="MASTER A1">MASTER A1 (30-34)</option><option value="MASTER A2">MASTER A2 (35-39)</option><option value="MASTER B1">MASTER B1 (40-44)</option><option value="MASTER B2">MASTER B2 (45-49)</option><option value="MASTER C">MASTER C (50+)</option></optgroup>
                    <optgroup label="BASE"><option value="INFANTO">INFANTO (12-14)</option><option value="JUVENIL">JUVENIL (15-16)</option><option value="JUNIOR">JÚNIOR (17-18)</option></optgroup>
                    <optgroup label="OUTROS"><option value="FEMININO">FEMININO (Livre)</option><option value="ESTREANTE">ESTREANTE (Livre)</option></optgroup>
                </select>
            </div></div>
            <div class="group"><label>Equipe</label><div class="wrapper"><i class="fas fa-users icon-left"></i><input type="text" id="equipe" placeholder="Sua equipe"></div></div>
            <div class="group"><label>Tipo Sanguíneo</label><div class="wrapper"><i class="fas fa-tint icon-left"></i><select id="sangue"><option value="A+">A+</option><option value="O+">O+</option><option value="B+">B+</option><option value="AB+">AB+</option><option value="A-">A-</option><option value="O-">O-</option><option value="B-">B-</option><option value="AB-">AB-</option></select></div></div>
            <div class="group full-width"><label>Crie sua Senha</label><div class="wrapper"><i class="fas fa-lock icon-left"></i><input type="password" id="pass" required></div></div>
            <button type="submit">CONCLUIR CADASTRO</button>
        </form>
    </div>
    <script>
        document.getElementById('cpf').addEventListener('input', (e) => {
            let v = e.target.value.replace(/\D/g, '');
            v = v.replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d)/, '$1.$2').replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            e.target.value = v;
        });
        document.getElementById('cadastroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('selfie').files[0];
            const dados = {
                nome: document.getElementById('nome').value, nascimento: document.getElementById('nascimento').value,
                cpf: document.getElementById('cpf').value, categoria: document.getElementById('categoria').value,
                equipe: document.getElementById('equipe').value, sangue: document.getElementById('sangue').value,
                senha: document.getElementById('pass').value, foto: ""
            };
            const salvar = (d) => {
                localStorage.setItem('usuarioPiloto', JSON.stringify(d));
                alert("Cadastro Realizado com sucesso!");
                window.location.href = "dashboard.html"; 
            };
            if (file) {
                const reader = new FileReader();
                reader.onloadend = () => { dados.foto = reader.result; salvar(dados); };
                reader.readAsDataURL(file);
            } else { salvar(dados); }
        });
    </script>
</body>
</html>
